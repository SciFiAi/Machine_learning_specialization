<meta charset="utf-8"/>
<co-content>
 <p>
  Скачайте сырые данные о поездках жёлтого такси с сайта TLC:
  <a href="http://www.nyc.gov/html/tlc/html/about/trip_record_data.shtml">
   www.nyc.gov/html/tlc/html/about/trip_record_data.shtml
  </a>
 </p>
 <p>
  Поездки зелёного такси и лимузинов нас не интересуют!
 </p>
 <p>
  Данные выложены в файлах по месяцам. Скачайте так много данных жёлтого такси, как сможете; чем больше вы будете использовать данных, тем точнее получатся ваши прогнозы. Если вы решите использовать не все данные, а только часть, выбирайте её по времени с конца. Абсолютный минимум необходимых данных — 6 месяцев: один, последний месяц, вам понадобится для тестирования, предшествующие 5 — для обучения. По 5 месяцам можно построить прогнозы, учитывающие дневную и недельную сезонности, но в данных есть и годовая. Чтобы её учесть, необходимы данные как минимум за 2 года.
 </p>
 <p>
  Обработайте сырые данные по следующей схеме.
 </p>
 <ol bullettype="numbers">
  <li>
   <p>
    Почистите данные от ошибок и аномалий.
   </p>
  </li>
  <li>
   <p>
    Отбросьте минуты и секунды во времени начала поездки.
   </p>
  </li>
  <li>
   <p>
    Нью-Йорк вписан в прямоугольник от -74.25559 до -73.70001 градусов долготы и от 40.49612 до 40.91553 широты. Разбейте этот прямоугольник на 2500 одинаковых прямоугольных областей — по 50 интервалов вдоль каждой оси.
   </p>
  </li>
  <li>
   <p>
    Посчитайте количество поездок за каждый час из каждой области. Не забудьте, что если в сырых данных для какой-то пары час-область нет ни одной записи, то в агрегированных данных для неё должен стоять 0.
   </p>
  </li>
 </ol>
 <p>
  В дальнейшем, когда вы будете предсказывать получившиеся ряды, нужно будет загружать ваши прогнозы на kaggle, поэтому нужно, чтобы идентификаторы ячеек были определены однозначно. В следующем файле даны идентификаторы ячеек, которые вам нужно использовать, и географические координаты их границ:
 </p>
 <asset assettype="generic" extension="csv" id="kt57TrmNEea3qApInhZCFg" name="regions">
 </asset>
 <p>
  Для сдачи задания этой недели вам нужно агрегировать только данные за май 2016, но, когда задание будет сдано, не забудьте запустить ваш агрегирующий скрипт на всех остальных месяцах, которые вы собираетесь использовать при прогнозировании.
 </p>
 <p>
 </p>
 <p>
  Чтобы сдать задание, выполните следующую последовательность действий.
 </p>
 <p>
  1. Загрузите данные за май 2016 года.
 </p>
 <p>
  2. Проведите фильтрацию: удалите поездки с
 </p>
 <ul bullettype="bullets">
  <li>
   <p>
    нулевой длительностью
   </p>
  </li>
  <li>
   <p>
    нулевым количеством пассажиров
   </p>
  </li>
  <li>
   <p>
    нулевым расстоянием поездки по счётчику
   </p>
  </li>
  <li>
   <p>
    координатами начала, не попадающими в прямоугольник Нью-Йорка
   </p>
  </li>
 </ul>
 <p>
  Можно придумать ещё какие-то критерии для фильтрации данных; тем не менее, не стоит применять дополнительные фильтры: начиная с четвёртой недели вам предстоит сравнивать качество ваших прогнозов с качеством прогнозов других слушателей, и, чтобы это сравнение было корректным, нужно, чтобы данные у всех были предобработаны одинаково.
 </p>
 <p>
  3. Агрегируйте данные за май 2016 года по часам и областям (можно использовать функцию stats.binned_statistic_2d, с которой вы сталкивались в заданиях четвёртого курса). Не забудьте проверить, что идентификаторы, которые вы присваиваете ячейкам, соответствуют приложенному выше файлу.
 </p>
 <p>
  4. Выведите первые строки полученной таблицы с указанием времени, идентификатора зоны и количества поездок.
 </p>
 <p>
  5. Постройте график количества поездок жёлтого такси из ячейки, содержащей Empire State Building.
 </p>
 <p>
  6. Посчитайте, сколько в мае 2016 было пар час-ячейка, для которых не было совершено ни одной поездки.
 </p>
 <p>
  7. Загрузите ноутбук в форму ниже
 </p>
</co-content>
<h3 level="3">
 Review criteria
</h3>
<co-content>
 <p>
  В качестве ответа в этом задании вам нужно загрузить ноутбук; убедитесь, что ход анализа, который вы провели, описан достаточно подробно для того, чтобы ваши сокурсники поняли, что вы делали и почему.
 </p>
</co-content>
<style>
 body {
    padding: 50px 85px 50px 85px;
}

table th, table td {
    border: 1px solid #e0e0e0;
    padding: 5px 20px;
    text-align: left;
}
input {
    margin: 10px;
}
}
th {
    font-weight: bold;
}
td, th {
    display: table-cell;
    vertical-align: inherit;
}
img {
    height: auto;
    max-width: 100%;
}
pre {
    display: block;
    margin: 20px;
    background: #424242;
    color: #fff;
    font-size: 13px;
    white-space: pre-wrap;
    padding: 9.5px;
    margin: 0 0 10px;
    border: 1px solid #ccc;
}
</style>
<script async="" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript">
</script>
<script type="text/x-mathjax-config">
 MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$$','$$'], ['$','$'] ],
      displayMath: [ ["\\[","\\]"] ],
      processEscapes: true
    }
  });
</script>
