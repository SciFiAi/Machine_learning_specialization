<meta charset="utf-8"/>
<co-content>
 <p>
  На этой неделе вам предстоит попробовать добавить в вашу регрессионную модель дополнительные признаки.
 </p>
 <p>
  Во-первых, для прогнозирования можно использовать информацию, содержащуюся в сырых данных:
 </p>
 <ul bullettype="bullets">
  <li>
   <p>
    средняя длительность поездок
   </p>
  </li>
  <li>
   <p>
    среднее количество пассажиров
   </p>
  </li>
  <li>
   <p>
    среднее расстояние по счётчику
   </p>
  </li>
  <li>
   <p>
    доли географических зон, в которые совершаются поездки
   </p>
  </li>
  <li>
   <p>
    доли поездок, совершаемых по тарифам каждого из типов
   </p>
  </li>
  <li>
   <p>
    доли способов оплаты поездок
   </p>
  </li>
  <li>
   <p>
    средняя стоимость поездок
   </p>
  </li>
  <li>
   <p>
    доли провайдеров данных
   </p>
  </li>
 </ul>
 <p hasmath="true">
  Все эти признаки можно использовать только с задержкой, то есть, при прогнозировании \(\hat{y}_{T+i|T}\) эти признаки должны быть рассчитаны по данным не позднее момента времени \(T\). Каждый из этих признаков можно использовать по-разному: как сырые значения за последние несколько часов, так и средние за последний день, неделю, месяц и т. д.
 </p>
 <p>
  Во-вторых, чтобы улучшить качество прогнозов в аномальные периоды, вы можете найти информацию о потенциально влияющих на количество поездок событиях, таких, как государственные праздники. Проанализируйте, как именно поведение пассажиров меняется во время этих событий, и создайте признаки, отражающие эти изменения. Как показывает наш опыт, правильный учёт праздничных дней часто позволяет существенно уменьшить среднюю ошибку прогноза.
 </p>
 <p>
  В-третьих, можно использовать признаки, связанные с географией. Например, скорее всего, суммарное количество поездок, совершаемых из географической зоны, пропорционально площади этой зоны. Для зон, прилегающих к аэропорту, может быть характерен специфический паттерн дневной сезонности, связанный с тем, что спрос на такси будет повышаться в те часы, когда общественный транспорт перестаёт работать. В деловом центре максимальное количество поездок будет приходиться на начало и окончание рабочего дня, на Бродвее — на время начала и окончания спектаклей. Все эти идеи не обязательно верны, мы приводим их здесь только для того, чтобы продемонстрировать принцип рассуждений. Ещё один пример географического признака: можно попробовать добавить идентификатор боро, который можно найти в файле
  <a href="https://s3.amazonaws.com/nyc-tlc/misc/taxi+_zone_lookup.csv">
   https://s3.amazonaws.com/nyc-tlc/misc/taxi+_zone_lookup.csv
  </a>
  . Кроме того, нам кажется перспективным использование в качестве фактора количества поездок, совершённых за прошлый час/день и т. д. из соседних географических зон, или количества поездок, совершённых за прошлый час/день
  <strong>
   в
  </strong>
  текущую географическую зону.
 </p>
 <p>
  Много примеров других признаков, которые можно использовать при регрессионном прогнозировании, можно найти в
  <a href="https://habrahabr.ru/company/yandex/blog/316232/">
   лекции
  </a>
  Вадима Стрижова.
 </p>
 <p>
 </p>
 <p>
  Чтобы сдать задание, выполните следующую последовательность действий.
 </p>
 <ol bullettype="numbers">
  <li>
   <p hasmath="true">
    Загрузите обучающие выборки прошлой недели, перечислите используемые в моделях признаки и посчитайте \(Q_{may}\) — качество прогнозов моделей, настроенных на данных до апреля 2016, в мае 2016.
   </p>
  </li>
  <li>
   <p>
    Попробуйте добавить признаки. Используйте идеи, которые мы предложили, или какие-то свои. Обучайте обновлённые модели на данных до апреля 2016 включительно и считайте качество новых прогнозов на мае. Удаётся ли вам улучшить качество? Не нужно ли увеличить сложность регрессионной модели? Если добавляемый признак не улучшает качество, всё равно оставьте доказательства этому в ноутбуке, чтобы ваши коллеги это видели при проверке.
   </p>
  </li>
  <li>
   <p hasmath="true">
    Когда вы примете решение остановиться и перестать добавлять признаки, постройте для каждой географической зоны и каждого конца истории от 2016.04.30 23:00 до 2016.05.31 17:00 прогнозы на 6 часов вперёд; посчитайте в ноутбуке ошибку прогноза по следующему функционалу: \[Q_{may} =\frac1{R* 739* 6} \sum\limits_{r=1}^{R} \sum_{T=2016.04.30 23:00}^{2016.05.31 17:00} \sum_{i=1}^6 \left| \hat{y}^r_{T|T+i} - y^r_{T+i} \right|.\]Убедитесь, что среднее качество прогнозов увеличилось.
   </p>
  </li>
  <li>
   <p>
    Переобучите итоговые модели на данных до мая 2016 включительно, постройте прогнозы на июнь для каждого конца истории от 2016.05.31 23:00 до 2016.06.30 17:00 и запишите все результаты в один файл в уже знакомом вам формате:
    <em>
     geoID, histEndDay, histEndHour, step, y
    </em>
   </p>
  </li>
  <li>
   <p>
    Загрузите полученный файл на kaggle:
    <a href="https://inclass.kaggle.com/c/yellowtaxi.">
     https://inclass.kaggle.com/c/yellowtaxi.
    </a>
    Добавьте в ноутбук ссылку на сабмишн.
   </p>
  </li>
  <li>
   <p>
    Загрузите ноутбук в форму.
   </p>
  </li>
 </ol>
</co-content>
<h3 level="3">
 Review criteria
</h3>
<co-content>
 <p>
  В качестве ответа в этом задании вам нужно загрузить ноутбук; убедитесь, что ход анализа, который вы провели, описан достаточно подробно для того, чтобы ваши сокурсники поняли, что вы делали и почему.
 </p>
</co-content>
<style>
 body {
    padding: 50px 85px 50px 85px;
}

table th, table td {
    border: 1px solid #e0e0e0;
    padding: 5px 20px;
    text-align: left;
}
input {
    margin: 10px;
}
}
th {
    font-weight: bold;
}
td, th {
    display: table-cell;
    vertical-align: inherit;
}
img {
    height: auto;
    max-width: 100%;
}
pre {
    display: block;
    margin: 20px;
    background: #424242;
    color: #fff;
    font-size: 13px;
    white-space: pre-wrap;
    padding: 9.5px;
    margin: 0 0 10px;
    border: 1px solid #ccc;
}
</style>
<script async="" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript">
</script>
<script type="text/x-mathjax-config">
 MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$$','$$'], ['$','$'] ],
      displayMath: [ ["\\[","\\]"] ],
      processEscapes: true
    }
  });
</script>
